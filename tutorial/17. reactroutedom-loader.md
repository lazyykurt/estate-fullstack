# 使用 react-router-dom 的 loader 功能，使用远程数据

1. 写页面 loader，添加到页面，在页面中使用

```js
// 写loader
export const singlePageLoader = async ({ request, params }) => {
  const res = await apiRequest("/posts/" + params.id);
  return res.data;
};

// 添加到页面，app 页面路由中设置
{
  path: "/:id",
  element: <SinglePage />,
  loader: singlePageLoader,
},

// 在页面中使用，添加useLoaderData，则可以使用loader返回的数据。
const post = useLoaderData();
```

2. 内部 HTML 展示
   
import DOMPurify from "dompurify";库

```js
<div
  className="bottom"
  dangerouslySetInnerHTML={{
    __html: DOMPurify.sanitize(post.postDetail.desc),
  }}
></div>
```

dangerouslySetInnerHTML, 设置元素的内部 HTML，这里使用了 DOMPurify 库来清理 post.postDetail.desc 中的 HTML 内容，以确保插入的 HTML 是安全的。DOMPurify.sanitize 函数会移除所有不安全的 HTML，防止 XSS 攻击。

